$(document).ready(function(){$(".wrapper").addClass("loaded"),$(".icon-menu").click(function(e){$(this).toggleClass("active"),$(".menu__body").toggleClass("active"),$("body").toggleClass("lock")})});const lazyImages=document.querySelectorAll("img[data-src],source[data-srcset]"),loadMapBlock=document.querySelector("._load-map"),windowHeight=document.documentElement.clientHeight,loadMoreBlock=document.querySelector("._load-more");let lazyImagesPosition=[];function lazyScroll(){document.querySelectorAll("img[data-src],source[data-srcset]").length>0&&lazyScrollCheck()}function lazyScrollCheck(){let e=lazyImagesPosition.findIndex(e=>pageYOffset>e-windowHeight);e>=0&&(lazyImages[e].dataset.src?(lazyImages[e].src=lazyImages[e].dataset.src,lazyImages[e].removeAttribute("data-src")):lazyImages[e].dataset.src&&(lazyImages[e].srcset=lazyImages[e].dataset.srcset,lazyImages[e].removeAttribute("data-srcset")),delete lazyImagesPosition[e])}function getMap(){const e=loadMapBlock.getBoundingClientRect().top+pageYOffset;if(pageYOffset>e-windowHeight){const e=loadMapBlock.dataset.map;e&&(loadMapBlock.insertAdjacentHTML("beforeedn",`<iframe src ="${e}" style="border:0;" allowfullscreen="" loading="lazy" </iframe>`),loadMapBlock.classList.add("_loaded"))}}function loadMore(){const e=loadMoreBlock.getBoundingClientRect().top+pageYOffset,t=loadMoreBlock.offsetHeight;pageYOffset>e+t-windowHeight&&getContent()}async function getContent(){document.querySelector("._loading-icon")||loadMoreBlock.insertAdjacentHTML("beforend",'<div class="_loading-icon"></div>'),loadMoreBlock.classList.add("_loading");let e=await fetch("_more.html",{method:"GET"});if(e.ok){let t=await e.text();loadMoreBlock.insertAdjacentHTML("beforeend",t),loadMoreBlock.classList.remove("_loading"),document.querySelector("._loading-icon")&&document.document.querySelector("._loading-icon").remove()}else alert("Ошибка")}lazyImages.length>0&&lazyImages.forEach(e=>{(e.dataset.src||e.dataset.srcset)&&(lazyImagesPosition.push(e.getBoundingClientRect().top+pageYOffset),lazyScrollCheck())}),window.addEventListener("scroll",lazyScroll);